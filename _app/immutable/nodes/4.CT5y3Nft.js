import{f as T,a as x,c as ie}from"../chunks/8IsYoZpf.js";import{o as ke}from"../chunks/D_plpWBe.js";import{h as L,e as pe,aF as ge,b as be,aG as oe,f as je,g as we,s as Te,i as ne,U as se,w as z,y as le,x as ce,a as Y,L as $e,c as ye,as as ve,ar as de,aH as ue,O as He,j as fe,p as J,aB as Ce,aI as Fe,aJ as Ie,V as Se,Y as m,W as H,Z as u,_ as R,o as a,X as xe,aC as Q,a7 as Be,k as ee,a8 as G,aK as Ee}from"../chunks/DGibuiVI.js";import{s as D,d as Ne}from"../chunks/DeaLkUx5.js";import{i as q}from"../chunks/Cgo_h2qR.js";import{e as V,i as _e,g as Ae}from"../chunks/BgIDDkuh.js";import{s as he,a as Pe}from"../chunks/BfJeFqCq.js";const te=0,W=1,ae=2;function De(v,s,o,d,r){L&&pe();var i=v,n=ge(),y=He,p=se,M,$,B,c=n?le(void 0):ce(void 0,!1,!1),g=n?le(void 0):ce(void 0,!1,!1),S=!1;function k(b,f){S=!0,f&&(ve(A),de(A),ue(y));try{b===te&&o&&(M?fe(M):M=Y(()=>o(i))),b===W&&d&&($?fe($):$=Y(()=>d(i,c))),b!==te&&M&&J(M,()=>M=null),b!==W&&$&&J($,()=>$=null),b!==ae&&B&&J(B,()=>B=null)}finally{f&&(ue(null),de(null),ve(null),Ce())}}var A=be(()=>{if(p===(p=s()))return;let b=L&&oe(p)===(i.data===je);if(b&&(i=we(),Te(i),ne(!1),b=!0),oe(p)){var f=p;S=!1,f.then(F=>{f===p&&(z(c,F),k(W,!0))},F=>{if(f===p)throw z(g,F),k(ae,!0),g.v}),L?o&&(M=Y(()=>o(i))):$e(()=>{S||k(te,!0)})}else z(c,p),k(W,!1);return b&&ne(!0),()=>p=se});L&&(i=ye)}function Le(v,s,o){L&&pe();var d=v,r=se,i,n=ge()?Fe:Ie;be(()=>{n(r,r=s())&&(i&&J(i),i=Y(()=>o(d)))}),L&&(d=ye)}function Ue(v){return v.reduce((s,o)=>s.flatMap(d=>o.map(r=>[...d,r])),[[]])}function re(v,s){if(s===0)return[[]];if(v.length<s)return[];const[o,...d]=v,r=re(d,s-1).map(n=>[o,...n]),i=re(d,s);return[...r,...i]}function Oe(v,s){for(const o of v.days)for(const d of s.days)if(o==d&&v.start<s.end&&s.start<v.end)return!0;return!1}function Re(v,s){const o=v.map(n=>{const y=s.sections[n];if(!y)throw new Error(`Unknown course ${n}`);return y}),d=o.flat(1),r={};for(const n of d){r[n.id]=new Set;for(const y of d)n.id!=y.id&&Oe(n,y)&&r[n.id].add(y.id)}const i=[];for(const n of Ue(o)){let y=!0;for(const[p,M]of re(n,2))if(r[p.id].has(M.id)){y=!1;break}y&&i.push(n)}return i}var qe=T('<div class="day-header svelte-d67v1j"> </div>'),Ge=T('<div class="time-label svelte-d67v1j"> </div>'),Ve=T('<div class="section-instructor svelte-d67v1j"> </div>'),We=T('<div class="section svelte-d67v1j"><div class="section-time svelte-d67v1j"> </div> <div class="section-instructor svelte-d67v1j"> </div> <!></div>'),Ye=T('<div class="day-column svelte-d67v1j"><div class="sections-container svelte-d67v1j"></div></div>'),Je=T('<div class="schedule-container svelte-d67v1j"><div class="header svelte-d67v1j"><div class="time-header svelte-d67v1j"></div> <!></div> <div class="calendar-body svelte-d67v1j"><div class="time-column svelte-d67v1j"></div> <div class="days-container svelte-d67v1j"></div></div></div>');function Ze(v,s){Se(s,!0);const o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6};let r=24*60,i=0;s.schedule.forEach(e=>{r=Math.min(r,e.start),i=Math.max(i,e.end)}),r=Math.floor(r/60)*60,i=Math.ceil(i/60)*60,r=Math.min(r,8*60),i=Math.max(i,15*60);const n=[];for(let e=r;e<=i;e+=60){const t=Math.floor(e/60),l=t===0?12:t>12?t-12:t,_=t<12?"AM":"PM";n.push({time:e,label:`${l}:00 ${_}`})}function y(e){const t=n.length;return`top: ${t>1?e/(t-1)*100:0}%;`}const p=o.map(()=>[]);s.schedule.forEach(e=>{e.days.forEach(t=>{const l=d[t];l!==void 0&&p[l].push(e)})});const M={},$=["#BA0C2F","#215732","#007D8A","#F1B434","#FF6D6A","#971B2F","#13322B","#B5E3D8"];for(let e=0;e<s.schedule.length;e++){const t=s.schedule[e];M[t.id]=$[e%$.length]}function B(e){const t=i-r,l=(e.end-e.start)/t*100;return Math.floor(l/100*600)<36}function c(e){const t=i-r,l=(e.start-r)/t*100,_=(e.end-e.start)/t*100;return`top: ${l}%; height: ${_}%;`}function g(e){const t=Math.floor(e/60),l=e%60,_=t===0?12:t>12?t-12:t,j=t<12?"AM":"PM";return`${_}:${l.toString().padStart(2,"0")} ${j}`}var S=Je(),k=m(S),A=H(m(k),2);V(A,16,()=>o,e=>e,(e,t)=>{var l=qe(),_=m(l,!0);u(l),R(()=>D(_,t)),x(e,l)}),u(k);var b=H(k,2),f=m(b);V(f,23,()=>n,({label:e},t)=>`${e}-${t}`,(e,t,l)=>{let _=()=>a(t).label;var j=Ge(),h=m(j,!0);u(j),R(C=>{he(j,C),D(h,_())},[()=>y(a(l))]),x(e,j)}),u(f);var F=H(f,2);V(F,21,()=>p,_e,(e,t)=>{var l=Ye(),_=m(l);V(_,21,()=>a(t),_e,(j,h)=>{var C=We(),U=m(C),O=m(U);u(U);var P=H(U,2),Z=m(P,!0);u(P);var K=H(P,2);{var X=I=>{var E=Ve(),w=m(E,!0);u(E),R(()=>D(w,a(h).instructor)),x(I,E)};q(K,I=>{a(h).instructor&&!B(a(h))&&I(X)})}u(C),R((I,E,w,N,Me)=>{he(C,`${I??""} background-color: ${M[a(h).id]??""};`),Pe(C,"title",`${a(h).id??""} (${E??""} - ${w??""})${a(h).instructor?`, taught by ${a(h).instructor}`:""}`),D(O,`${N??""} - ${Me??""}`),D(Z,a(h).id)},[()=>c(a(h)),()=>g(a(h).start),()=>g(a(h).end),()=>g(a(h).start),()=>g(a(h).end)]),x(j,C)}),u(_),u(l),x(e,l)}),u(F),u(b),u(S),x(v,S),xe()}function me(v,s){Ae(`/courses?catalog=${encodeURIComponent(a(s))}`)}var Ke=(v,s,o)=>s(a(o).length),Xe=T('<button class="btn svelte-fu93ie">← Previous</button>'),ze=(v,s,o)=>s(a(o).length),Qe=T('<button class="btn svelte-fu93ie">Next →</button>'),et=T('<div class="schedule-controls svelte-fu93ie"><!> <div class="schedule-info svelte-fu93ie"><span class="schedule-counter svelte-fu93ie"> </span></div> <!></div> <div class="schedule-wrapper svelte-fu93ie"><!></div>',1),tt=T(`<div class="page-card svelte-fu93ie"><div class="no-schedules svelte-fu93ie"><h3 class="svelte-fu93ie">No Valid Schedules Found</h3> <p class="svelte-fu93ie">Unfortunately, there are no valid schedules possible with your selected courses due to
							time conflicts.</p> <p class="svelte-fu93ie">Try removing some courses or selecting different sections.</p></div></div>`),at=T('<div class="page-card svelte-fu93ie"><div class="loading svelte-fu93ie"><div class="loading-spinner svelte-fu93ie"></div> <p class="svelte-fu93ie">Generating your schedules...</p></div></div>'),st=T('<div class="schedule-page svelte-fu93ie"><div class="schedule-header svelte-fu93ie"><h1 class="page-title svelte-fu93ie">Your Schedule Options</h1> <p class="subtitle svelte-fu93ie">Here are all possible schedules for your selected courses.</p></div> <!> <div class="navigation svelte-fu93ie"><button class="btn svelte-fu93ie">← Back to Courses</button> <div class="step-indicator svelte-fu93ie"><span class="svelte-fu93ie">Step 3 of 3</span></div> <div class="svelte-fu93ie"></div></div></div>'),rt=T('<div class="page-card svelte-fu93ie"><div class="no-courses svelte-fu93ie"><h3 class="svelte-fu93ie">No Courses Selected</h3> <p class="svelte-fu93ie">Please go back and select some courses to generate schedules.</p> <button class="btn btn-primary svelte-fu93ie">Select Courses</button></div></div>');function ut(v,s){Se(s,!0);let o=Q(""),d=Q(Be([])),r=Q(0);ke(()=>{let c=new URLSearchParams(window.location.search);G(o,c.get("catalog")??"Fall 2025",!0),G(d,JSON.parse(c.get("courses")??"[]"),!0)});const i=async c=>{let g=s.data.catalogData[a(o)];return new Promise((S,k)=>{S(Re(c,g))})};function n(c){G(r,(a(r)+1)%c)}function y(c){G(r,(a(r)-1+c)%c)}var p=ie(),M=ee(p);{var $=c=>{var g=st(),S=H(m(g),2);De(S,()=>i(a(d)),b=>{var f=at();x(b,f)},(b,f)=>{var F=ie(),e=ee(F);{var t=_=>{var j=et(),h=ee(j),C=m(h);{var U=w=>{var N=Xe();N.__click=[Ke,y,f],x(w,N)};q(C,w=>{a(f).length>1&&w(U)})}var O=H(C,2),P=m(O),Z=m(P);u(P),u(O);var K=H(O,2);{var X=w=>{var N=Qe();N.__click=[ze,n,f],x(w,N)};q(K,w=>{a(f).length>1&&w(X)})}u(h);var I=H(h,2),E=m(I);Le(E,()=>a(r),w=>{Ze(w,{get schedule(){return a(f)[a(r)]}})}),u(I),R(()=>D(Z,`Schedule ${a(r)+1} of ${a(f).length??""}`)),x(_,j)},l=_=>{var j=tt();x(_,j)};q(e,_=>{a(f).length>0?_(t):_(l,!1)})}x(b,F)});var k=H(S,2),A=m(k);A.__click=[me,o],Ee(4),u(k),u(g),x(c,g)},B=c=>{var g=rt(),S=m(g),k=H(m(S),4);k.__click=[me,o],u(S),u(g),x(c,g)};q(M,c=>{a(d).length>0?c($):c(B,!1)})}x(v,p),xe()}Ne(["click"]);export{ut as component};
