import{f as w,a as x,c as ie}from"../chunks/CLTa46Dl.js";import{o as Me}from"../chunks/D23r07B5.js";import{h as L,e as me,aF as be,b as pe,aG as ne,f as ke,g as we,s as Te,i as le,U as re,v as Q,x as ce,w as ve,a as J,K as $e,c as ge,as as ue,ar as de,aH as fe,O as He,j as _e,p as K,aB as Ce,aI as Fe,aJ as Ie,V as xe,Y as _,W as $,Z as d,_ as R,m as s,X as ye,aC as ee,a7 as Ee,M as te,a8 as V,aK as Ne}from"../chunks/CuBYgweG.js";import{s as U,d as Ae}from"../chunks/BYKqv92l.js";import{i as q}from"../chunks/CtSaMWuN.js";import{g as Be}from"../chunks/CEtcRXBN.js";import{e as W,i as Y}from"../chunks/CpJELWDC.js";import{s as Pe,a as De}from"../chunks/CVwI9q4e.js";const ae=0,j=1,se=2;function Ue(v,r,i,u,a){L&&me();var o=v,l=be(),b=He,p=re,y,S,I,n=l?ce(void 0):ve(void 0,!1,!1),g=l?ce(void 0):ve(void 0,!1,!1),M=!1;function k(h,e){M=!0,e&&(ue(C),de(C),fe(b));try{h===ae&&i&&(y?_e(y):y=J(()=>i(o))),h===j&&u&&(S?_e(S):S=J(()=>u(o,n))),h!==ae&&y&&K(y,()=>y=null),h!==j&&S&&K(S,()=>S=null),h!==se&&I&&K(I,()=>I=null)}finally{e&&(fe(null),de(null),ue(null),Ce())}}var C=pe(()=>{if(p===(p=r()))return;let h=L&&ne(p)===(o.data===ke);if(h&&(o=we(),Te(o),le(!1),h=!0),ne(p)){var e=p;M=!1,e.then(t=>{e===p&&(Q(n,t),k(j,!0))},t=>{if(e===p)throw Q(g,t),k(se,!0),g.v}),L?i&&(y=J(()=>i(o))):$e(()=>{M||k(ae,!0)})}else Q(n,p),k(j,!1);return h&&le(!0),()=>p=re});L&&(o=ge)}function Le(v,r,i){L&&me();var u=v,a=re,o,l=be()?Fe:Ie;pe(()=>{l(a,a=r())&&(o&&K(o),o=J(()=>i(u)))}),L&&(u=ge)}function Oe(v){return v.reduce((r,i)=>r.flatMap(u=>i.map(a=>[...u,a])),[[]])}function oe(v,r){if(r===0)return[[]];if(v.length<r)return[];const[i,...u]=v,a=oe(u,r-1).map(l=>[i,...l]),o=oe(u,r);return[...a,...o]}function Re(v,r){for(const i of v.days)for(const u of r.days)if(i==u&&v.start<r.end&&r.start<v.end)return!0;return!1}function qe(v,r){const i=v.map(l=>{const b=r.sections[l];if(!b)throw new Error(`Unknown course ${l}`);return b}),u=i.flat(1),a={};for(const l of u){a[l.id]=new Set;for(const b of u)l.id!=b.id&&Re(l,b)&&a[l.id].add(b.id)}const o=[];for(const l of Oe(i)){let b=!0;for(const[p,y]of oe(l,2))if(a[p.id].has(y.id)){b=!1;break}b&&o.push(l)}return o}var Ge=w('<div class="day-header svelte-obuxb6"> </div>'),Ve=w('<div class="time-label svelte-obuxb6"> </div>'),We=w('<div class="section-instructor svelte-obuxb6"> </div>'),Ye=w('<div class="section svelte-obuxb6"><div class="section-time svelte-obuxb6"> </div> <div class="section-instructor svelte-obuxb6"> </div> <!></div>'),je=w('<div class="day-column svelte-obuxb6"><div class="sections-container svelte-obuxb6"></div></div>'),Je=w('<div class="schedule-container svelte-obuxb6"><div class="header svelte-obuxb6"><div class="time-header svelte-obuxb6"></div> <!></div> <div class="calendar-body svelte-obuxb6"><div class="time-column svelte-obuxb6"></div> <div class="days-container svelte-obuxb6"></div></div></div>');function Ke(v,r){xe(r,!0);const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],u={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6};let a=24*60,o=0;r.schedule.forEach(e=>{a=Math.min(a,e.start),o=Math.max(o,e.end)}),a=Math.floor(a/60)*60,o=Math.ceil(o/60)*60,a=Math.min(a,8*60),o=Math.max(o,15*60);const l=[];for(let e=a;e<=o;e+=60){const t=Math.floor(e/60),c=t===0?12:t>12?t-12:t,m=t<12?"AM":"PM";l.push({time:e,label:`${c}:00 ${m}`})}const b=i.map(()=>[]);r.schedule.forEach(e=>{e.days.forEach(t=>{const c=u[t];c!==void 0&&b[c].push(e)})});function p(e){const t=o-a,c=(e.end-e.start)/t*100;return Math.floor(c/100*600)<36}function y(e){const t=o-a,c=(e.start-a)/t*100,m=(e.end-e.start)/t*100;return`top: ${c}%; height: ${m}%;`}function S(e){const t=Math.floor(e/60),c=e%60,m=t===0?12:t>12?t-12:t,E=t<12?"AM":"PM";return`${m}:${c.toString().padStart(2,"0")} ${E}`}function I(e){const t=["#BA0C2F","#215732","#007D8A","#F1B434","#FF6D6A","#971B2F","#13322B","#B5E3D8"];return t[e%t.length]}var n=Je(),g=_(n),M=$(_(g),2);W(M,17,()=>i,Y,(e,t)=>{var c=Ge(),m=_(c,!0);d(c),R(()=>U(m,s(t))),x(e,c)}),d(g);var k=$(g,2),C=_(k);W(C,21,()=>l,Y,(e,t)=>{let c=()=>s(t).label;var m=Ve(),E=_(m,!0);d(m),R(()=>U(E,c())),x(e,m)}),d(C);var h=$(C,2);W(h,21,()=>b,Y,(e,t)=>{var c=je(),m=_(c);W(m,21,()=>s(t),Y,(E,f,P)=>{var H=Ye(),D=_(H),Z=_(D);d(D);var N=$(D,2),G=_(N,!0);d(N);var X=$(N,2);{var z=A=>{var F=We(),O=_(F,!0);d(F),R(()=>U(O,s(f).instructor)),x(A,F)};q(X,A=>{s(f).instructor&&!p(s(f))&&A(z)})}d(H),R((A,F,O,T,B,Se)=>{Pe(H,`${A??""} background-color: ${F??""};`),De(H,"title",`${s(f).id??""} (${O??""} - ${T??""})${s(f).instructor?`, taught by ${s(f).instructor}`:""}`),U(Z,`${B??""} - ${Se??""}`),U(G,s(f).id)},[()=>y(s(f)),()=>I(P),()=>S(s(f).start),()=>S(s(f).end),()=>S(s(f).start),()=>S(s(f).end)]),x(E,H)}),d(m),d(c),x(e,c)}),d(h),d(k),d(n),x(v,n),ye()}function he(v,r){Be(`/courses?catalog=${encodeURIComponent(s(r))}`)}var Ze=(v,r,i)=>r(s(i).length),Xe=w('<button class="btn svelte-fu93ie">← Previous</button>'),ze=(v,r,i)=>r(s(i).length),Qe=w('<button class="btn svelte-fu93ie">Next →</button>'),et=w('<div class="schedule-controls svelte-fu93ie"><!> <div class="schedule-info svelte-fu93ie"><span class="schedule-counter svelte-fu93ie"> </span></div> <!></div> <div class="schedule-wrapper svelte-fu93ie"><!></div>',1),tt=w(`<div class="page-card svelte-fu93ie"><div class="no-schedules svelte-fu93ie"><h3 class="svelte-fu93ie">No Valid Schedules Found</h3> <p class="svelte-fu93ie">Unfortunately, there are no valid schedules possible with your selected courses due to
							time conflicts.</p> <p class="svelte-fu93ie">Try removing some courses or selecting different sections.</p></div></div>`),at=w('<div class="page-card svelte-fu93ie"><div class="loading svelte-fu93ie"><div class="loading-spinner svelte-fu93ie"></div> <p class="svelte-fu93ie">Generating your schedules...</p></div></div>'),st=w('<div class="schedule-page svelte-fu93ie"><div class="schedule-header svelte-fu93ie"><h1 class="page-title svelte-fu93ie">Your Schedule Options</h1> <p class="subtitle svelte-fu93ie">Here are all possible schedules for your selected courses.</p></div> <!> <div class="navigation svelte-fu93ie"><button class="btn svelte-fu93ie">← Back to Courses</button> <div class="step-indicator svelte-fu93ie"><span class="svelte-fu93ie">Step 3 of 3</span></div> <div class="svelte-fu93ie"></div></div></div>'),rt=w('<div class="page-card svelte-fu93ie"><div class="no-courses svelte-fu93ie"><h3 class="svelte-fu93ie">No Courses Selected</h3> <p class="svelte-fu93ie">Please go back and select some courses to generate schedules.</p> <button class="btn btn-primary svelte-fu93ie">Select Courses</button></div></div>');function ft(v,r){xe(r,!0);let i=ee(""),u=ee(Ee([])),a=ee(0);Me(()=>{let n=new URLSearchParams(window.location.search);V(i,n.get("catalog")??"Fall 2025",!0),V(u,JSON.parse(n.get("courses")??"[]"),!0)});const o=async n=>{let g=r.data.catalogData[s(i)];return new Promise((M,k)=>{M(qe(n,g))})};function l(n){V(a,(s(a)+1)%n)}function b(n){V(a,(s(a)-1+n)%n)}var p=ie(),y=te(p);{var S=n=>{var g=st(),M=$(_(g),2);Ue(M,()=>o(s(u)),h=>{var e=at();x(h,e)},(h,e)=>{var t=ie(),c=te(t);{var m=f=>{var P=et(),H=te(P),D=_(H);{var Z=T=>{var B=Xe();B.__click=[Ze,b,e],x(T,B)};q(D,T=>{s(e).length>1&&T(Z)})}var N=$(D,2),G=_(N),X=_(G);d(G),d(N);var z=$(N,2);{var A=T=>{var B=Qe();B.__click=[ze,l,e],x(T,B)};q(z,T=>{s(e).length>1&&T(A)})}d(H);var F=$(H,2),O=_(F);Le(O,()=>s(a),T=>{Ke(T,{get schedule(){return s(e)[s(a)]}})}),d(F),R(()=>U(X,`Schedule ${s(a)+1} of ${s(e).length??""}`)),x(f,P)},E=f=>{var P=tt();x(f,P)};q(c,f=>{s(e).length>0?f(m):f(E,!1)})}x(h,t)});var k=$(M,2),C=_(k);C.__click=[he,i],Ne(4),d(k),d(g),x(n,g)},I=n=>{var g=rt(),M=_(g),k=$(_(M),4);k.__click=[he,i],d(M),d(g),x(n,g)};q(y,n=>{s(u).length>0?n(S):n(I,!1)})}x(v,p),ye()}Ae(["click"]);export{ft as component};
