import{f as k,a as S,c as ie}from"../chunks/D-P26-3F.js";import{o as Se}from"../chunks/CvVOBqRR.js";import{h as R,e as be,aF as me,b as pe,aG as ne,f as Me,g as ke,s as we,i as le,U as re,v as z,x as ce,w as ve,a as K,K as Te,c as ge,as as de,ar as ue,aH as fe,N as He,j as _e,p as V,aB as Ce,aI as Fe,aJ as Ie,W as xe,Y as b,Q as C,Z as u,_ as q,m as t,X as ye,aC as ee,a7 as Ne,R as te,a8 as W,aK as Be}from"../chunks/C9kFbmIE.js";import{s as U,d as Ee}from"../chunks/BNY73086.js";import{i as G}from"../chunks/CYYA1x2y.js";import{e as Y,i as j,g as $e}from"../chunks/BGQWMw5R.js";import{s as Ae,a as Pe}from"../chunks/CCHhbrwm.js";const ae=0,J=1,se=2;function De(v,a,i,d,s){R&&be();var r=v,l=me(),g=He,m=re,M,F,B,n=l?ce(void 0):ve(void 0,!1,!1),x=l?ce(void 0):ve(void 0,!1,!1),y=!1;function w(_,f){y=!0,f&&(de(E),ue(E),fe(g));try{_===ae&&i&&(M?_e(M):M=K(()=>i(r))),_===J&&d&&(F?_e(F):F=K(()=>d(r,n))),_!==ae&&M&&V(M,()=>M=null),_!==J&&F&&V(F,()=>F=null),_!==se&&B&&V(B,()=>B=null)}finally{f&&(fe(null),ue(null),de(null),Ce())}}var E=pe(()=>{if(m===(m=a()))return;let _=R&&ne(m)===(r.data===Me);if(_&&(r=ke(),we(r),le(!1),_=!0),ne(m)){var f=m;y=!1,f.then(e=>{f===m&&(z(n,e),w(J,!0))},e=>{if(f===m)throw z(x,e),w(se,!0),x.v}),R?i&&(M=K(()=>i(r))):Te(()=>{y||w(ae,!0)})}else z(n,m),w(J,!1);return _&&le(!0),()=>m=re});R&&(r=ge)}function Ue(v,a,i){R&&be();var d=v,s=re,r,l=me()?Fe:Ie;pe(()=>{l(s,s=a())&&(r&&V(r),r=K(()=>i(d)))}),R&&(d=ge)}function Re(v){return v.reduce((a,i)=>a.flatMap(d=>i.map(s=>[...d,s])),[[]])}function oe(v,a){if(a===0)return[[]];if(v.length<a)return[];const[i,...d]=v,s=oe(d,a-1).map(l=>[i,...l]),r=oe(d,a);return[...s,...r]}function Le(v,a){for(const i of v.days)for(const d of a.days)if(i==d&&v.start<a.end&&a.start<v.end)return!0;return!1}function qe(v,a){const i=v.map(l=>{const g=a.sections[l];if(!g)throw new Error(`Unknown course ${l}`);return g}),d=i.flat(1),s={};for(const l of d){s[l.id]=new Set;for(const g of d)l.id!=g.id&&Le(l,g)&&s[l.id].add(g.id)}const r=[];for(const l of Re(i)){let g=!0;for(const[m,M]of oe(l,2))if(s[m.id].has(M.id)){g=!1;break}g&&r.push(l)}return r}var Ge=k('<div class="day-header svelte-obuxb6"> </div>'),Oe=k('<div class="time-label svelte-obuxb6"> </div>'),We=k('<div class="section-instructor svelte-obuxb6"> </div>'),Ye=k('<div class="section svelte-obuxb6"><div class="section-time svelte-obuxb6"> </div> <div class="section-instructor svelte-obuxb6"> </div> <!></div>'),je=k('<div class="day-column svelte-obuxb6"><div class="sections-container svelte-obuxb6"></div></div>'),Je=k('<div class="schedule-container svelte-obuxb6"><div class="header svelte-obuxb6"><div class="time-header svelte-obuxb6"></div> <!></div> <div class="calendar-body svelte-obuxb6"><div class="time-column svelte-obuxb6"></div> <div class="days-container svelte-obuxb6"></div></div></div>');function Ke(v,a){xe(a,!0);const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6};let s=24*60,r=0;a.schedule.forEach(e=>{s=Math.min(s,e.start),r=Math.max(r,e.end)}),s=Math.floor(s/60)*60,r=Math.ceil(r/60)*60,s=Math.min(s,8*60),r=Math.max(r,15*60);const l=[];for(let e=s;e<=r;e+=60){const o=Math.floor(e/60),c=o===0?12:o>12?o-12:o,p=o<12?"AM":"PM";l.push({time:e,label:`${c}:00 ${p}`})}const g=i.map(()=>[]);a.schedule.forEach(e=>{e.days.forEach(o=>{const c=d[o];c!==void 0&&g[c].push(e)})});const m={},M=["#BA0C2F","#215732","#007D8A","#F1B434","#FF6D6A","#971B2F","#13322B","#B5E3D8"];for(let e=0;e<a.schedule.length;e++){const o=a.schedule[e];m[o.id]=M[e%M.length]}function F(e){const o=r-s,c=(e.end-e.start)/o*100;return Math.floor(c/100*600)<36}function B(e){const o=r-s,c=(e.start-s)/o*100,p=(e.end-e.start)/o*100;return`top: ${c}%; height: ${p}%;`}function n(e){const o=Math.floor(e/60),c=e%60,p=o===0?12:o>12?o-12:o,T=o<12?"AM":"PM";return`${p}:${c.toString().padStart(2,"0")} ${T}`}var x=Je(),y=b(x),w=C(b(y),2);Y(w,17,()=>i,j,(e,o)=>{var c=Ge(),p=b(c,!0);u(c),q(()=>U(p,t(o))),S(e,c)}),u(y);var E=C(y,2),_=b(E);Y(_,21,()=>l,j,(e,o)=>{let c=()=>t(o).label;var p=Oe(),T=b(p,!0);u(p),q(()=>U(T,c())),S(e,p)}),u(_);var f=C(_,2);Y(f,21,()=>g,j,(e,o)=>{var c=je(),p=b(c);Y(p,21,()=>t(o),j,(T,h)=>{var I=Ye(),D=b(I),Z=b(D);u(D);var $=C(D,2),O=b($,!0);u($);var Q=C($,2);{var X=A=>{var N=We(),L=b(N,!0);u(N),q(()=>U(L,t(h).instructor)),S(A,N)};G(Q,A=>{t(h).instructor&&!F(t(h))&&A(X)})}u(I),q((A,N,L,H,P)=>{Ae(I,`${A??""} background-color: ${m[t(h).id]??""};`),Pe(I,"title",`${t(h).id??""} (${N??""} - ${L??""})${t(h).instructor?`, taught by ${t(h).instructor}`:""}`),U(Z,`${H??""} - ${P??""}`),U(O,t(h).id)},[()=>B(t(h)),()=>n(t(h).start),()=>n(t(h).end),()=>n(t(h).start),()=>n(t(h).end)]),S(T,I)}),u(p),u(c),S(e,c)}),u(f),u(E),u(x),S(v,x),ye()}function he(v,a){$e(`/courses?catalog=${encodeURIComponent(t(a))}`)}var Ve=(v,a,i)=>a(t(i).length),Ze=k('<button class="btn svelte-fu93ie">← Previous</button>'),Qe=(v,a,i)=>a(t(i).length),Xe=k('<button class="btn svelte-fu93ie">Next →</button>'),ze=k('<div class="schedule-controls svelte-fu93ie"><!> <div class="schedule-info svelte-fu93ie"><span class="schedule-counter svelte-fu93ie"> </span></div> <!></div> <div class="schedule-wrapper svelte-fu93ie"><!></div>',1),et=k(`<div class="page-card svelte-fu93ie"><div class="no-schedules svelte-fu93ie"><h3 class="svelte-fu93ie">No Valid Schedules Found</h3> <p class="svelte-fu93ie">Unfortunately, there are no valid schedules possible with your selected courses due to
							time conflicts.</p> <p class="svelte-fu93ie">Try removing some courses or selecting different sections.</p></div></div>`),tt=k('<div class="page-card svelte-fu93ie"><div class="loading svelte-fu93ie"><div class="loading-spinner svelte-fu93ie"></div> <p class="svelte-fu93ie">Generating your schedules...</p></div></div>'),at=k('<div class="schedule-page svelte-fu93ie"><div class="schedule-header svelte-fu93ie"><h1 class="page-title svelte-fu93ie">Your Schedule Options</h1> <p class="subtitle svelte-fu93ie">Here are all possible schedules for your selected courses.</p></div> <!> <div class="navigation svelte-fu93ie"><button class="btn svelte-fu93ie">← Back to Courses</button> <div class="step-indicator svelte-fu93ie"><span class="svelte-fu93ie">Step 3 of 3</span></div> <div class="svelte-fu93ie"></div></div></div>'),st=k('<div class="page-card svelte-fu93ie"><div class="no-courses svelte-fu93ie"><h3 class="svelte-fu93ie">No Courses Selected</h3> <p class="svelte-fu93ie">Please go back and select some courses to generate schedules.</p> <button class="btn btn-primary svelte-fu93ie">Select Courses</button></div></div>');function dt(v,a){xe(a,!0);let i=ee(""),d=ee(Ne([])),s=ee(0);Se(()=>{let n=new URLSearchParams(window.location.search);W(i,n.get("catalog")??"Fall 2025",!0),W(d,JSON.parse(n.get("courses")??"[]"),!0)});const r=async n=>{let x=a.data.catalogData[t(i)];return new Promise((y,w)=>{y(qe(n,x))})};function l(n){W(s,(t(s)+1)%n)}function g(n){W(s,(t(s)-1+n)%n)}var m=ie(),M=te(m);{var F=n=>{var x=at(),y=C(b(x),2);De(y,()=>r(t(d)),_=>{var f=tt();S(_,f)},(_,f)=>{var e=ie(),o=te(e);{var c=T=>{var h=ze(),I=te(h),D=b(I);{var Z=H=>{var P=Ze();P.__click=[Ve,g,f],S(H,P)};G(D,H=>{t(f).length>1&&H(Z)})}var $=C(D,2),O=b($),Q=b(O);u(O),u($);var X=C($,2);{var A=H=>{var P=Xe();P.__click=[Qe,l,f],S(H,P)};G(X,H=>{t(f).length>1&&H(A)})}u(I);var N=C(I,2),L=b(N);Ue(L,()=>t(s),H=>{Ke(H,{get schedule(){return t(f)[t(s)]}})}),u(N),q(()=>U(Q,`Schedule ${t(s)+1} of ${t(f).length??""}`)),S(T,h)},p=T=>{var h=et();S(T,h)};G(o,T=>{t(f).length>0?T(c):T(p,!1)})}S(_,e)});var w=C(y,2),E=b(w);E.__click=[he,i],Be(4),u(w),u(x),S(n,x)},B=n=>{var x=st(),y=b(x),w=C(b(y),4);w.__click=[he,i],u(y),u(x),S(n,x)};G(M,n=>{t(d).length>0?n(F):n(B,!1)})}S(v,m),ye()}Ee(["click"]);export{dt as component};
