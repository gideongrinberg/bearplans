import{f as k,a as S,c as ie}from"../chunks/CLTa46Dl.js";import{o as Se}from"../chunks/D23r07B5.js";import{h as L,e as me,aF as be,b as pe,aG as ne,f as Me,g as ke,s as we,i as le,U as re,v as Q,x as ce,w as ve,a as J,K as Te,c as ge,as as de,ar as ue,aH as fe,O as He,j as _e,p as K,aB as Ce,aI as Fe,aJ as Ie,V as xe,Y as m,W as C,Z as u,_ as R,m as t,X as ye,aC as ee,a7 as Ee,M as te,a8 as V,aK as Ne}from"../chunks/CuBYgweG.js";import{s as U,d as $e}from"../chunks/BYKqv92l.js";import{i as q}from"../chunks/CtSaMWuN.js";import{g as Ae}from"../chunks/RyBa8xQZ.js";import{e as W,i as Y}from"../chunks/CpJELWDC.js";import{s as Be,a as Pe}from"../chunks/CVwI9q4e.js";const ae=0,j=1,se=2;function De(v,a,i,d,s){L&&me();var r=v,l=be(),g=He,b=re,M,F,N,n=l?ce(void 0):ve(void 0,!1,!1),x=l?ce(void 0):ve(void 0,!1,!1),y=!1;function w(_,f){y=!0,f&&(de($),ue($),fe(g));try{_===ae&&i&&(M?_e(M):M=J(()=>i(r))),_===j&&d&&(F?_e(F):F=J(()=>d(r,n))),_!==ae&&M&&K(M,()=>M=null),_!==j&&F&&K(F,()=>F=null),_!==se&&N&&K(N,()=>N=null)}finally{f&&(fe(null),ue(null),de(null),Ce())}}var $=pe(()=>{if(b===(b=a()))return;let _=L&&ne(b)===(r.data===Me);if(_&&(r=ke(),we(r),le(!1),_=!0),ne(b)){var f=b;y=!1,f.then(e=>{f===b&&(Q(n,e),w(j,!0))},e=>{if(f===b)throw Q(x,e),w(se,!0),x.v}),L?i&&(M=J(()=>i(r))):Te(()=>{y||w(ae,!0)})}else Q(n,b),w(j,!1);return _&&le(!0),()=>b=re});L&&(r=ge)}function Ue(v,a,i){L&&me();var d=v,s=re,r,l=be()?Fe:Ie;pe(()=>{l(s,s=a())&&(r&&K(r),r=J(()=>i(d)))}),L&&(d=ge)}function Le(v){return v.reduce((a,i)=>a.flatMap(d=>i.map(s=>[...d,s])),[[]])}function oe(v,a){if(a===0)return[[]];if(v.length<a)return[];const[i,...d]=v,s=oe(d,a-1).map(l=>[i,...l]),r=oe(d,a);return[...s,...r]}function Oe(v,a){for(const i of v.days)for(const d of a.days)if(i==d&&v.start<a.end&&a.start<v.end)return!0;return!1}function Re(v,a){const i=v.map(l=>{const g=a.sections[l];if(!g)throw new Error(`Unknown course ${l}`);return g}),d=i.flat(1),s={};for(const l of d){s[l.id]=new Set;for(const g of d)l.id!=g.id&&Oe(l,g)&&s[l.id].add(g.id)}const r=[];for(const l of Le(i)){let g=!0;for(const[b,M]of oe(l,2))if(s[b.id].has(M.id)){g=!1;break}g&&r.push(l)}return r}var qe=k('<div class="day-header svelte-obuxb6"> </div>'),Ge=k('<div class="time-label svelte-obuxb6"> </div>'),Ve=k('<div class="section-instructor svelte-obuxb6"> </div>'),We=k('<div class="section svelte-obuxb6"><div class="section-time svelte-obuxb6"> </div> <div class="section-instructor svelte-obuxb6"> </div> <!></div>'),Ye=k('<div class="day-column svelte-obuxb6"><div class="sections-container svelte-obuxb6"></div></div>'),je=k('<div class="schedule-container svelte-obuxb6"><div class="header svelte-obuxb6"><div class="time-header svelte-obuxb6"></div> <!></div> <div class="calendar-body svelte-obuxb6"><div class="time-column svelte-obuxb6"></div> <div class="days-container svelte-obuxb6"></div></div></div>');function Je(v,a){xe(a,!0);const i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d={Mon:0,Tue:1,Wed:2,Thu:3,Fri:4,Sat:5,Sun:6};let s=24*60,r=0;a.schedule.forEach(e=>{s=Math.min(s,e.start),r=Math.max(r,e.end)}),s=Math.floor(s/60)*60,r=Math.ceil(r/60)*60,s=Math.min(s,8*60),r=Math.max(r,15*60);const l=[];for(let e=s;e<=r;e+=60){const o=Math.floor(e/60),c=o===0?12:o>12?o-12:o,p=o<12?"AM":"PM";l.push({time:e,label:`${c}:00 ${p}`})}const g=i.map(()=>[]);a.schedule.forEach(e=>{e.days.forEach(o=>{const c=d[o];c!==void 0&&g[c].push(e)})});const b={},M=["#BA0C2F","#215732","#007D8A","#F1B434","#FF6D6A","#971B2F","#13322B","#B5E3D8"];for(let e=0;e<a.schedule.length;e++){const o=a.schedule[e];b[o.id]=M[e%M.length]}function F(e){const o=r-s,c=(e.end-e.start)/o*100;return Math.floor(c/100*600)<36}function N(e){const o=r-s,c=(e.start-s)/o*100,p=(e.end-e.start)/o*100;return`top: ${c}%; height: ${p}%;`}function n(e){const o=Math.floor(e/60),c=e%60,p=o===0?12:o>12?o-12:o,T=o<12?"AM":"PM";return`${p}:${c.toString().padStart(2,"0")} ${T}`}var x=je(),y=m(x),w=C(m(y),2);W(w,17,()=>i,Y,(e,o)=>{var c=qe(),p=m(c,!0);u(c),R(()=>U(p,t(o))),S(e,c)}),u(y);var $=C(y,2),_=m($);W(_,21,()=>l,Y,(e,o)=>{let c=()=>t(o).label;var p=Ge(),T=m(p,!0);u(p),R(()=>U(T,c())),S(e,p)}),u(_);var f=C(_,2);W(f,21,()=>g,Y,(e,o)=>{var c=Ye(),p=m(c);W(p,21,()=>t(o),Y,(T,h)=>{var I=We(),D=m(I),Z=m(D);u(D);var A=C(D,2),G=m(A,!0);u(A);var X=C(A,2);{var z=B=>{var E=Ve(),O=m(E,!0);u(E),R(()=>U(O,t(h).instructor)),S(B,E)};q(X,B=>{t(h).instructor&&!F(t(h))&&B(z)})}u(I),R((B,E,O,H,P)=>{Be(I,`${B??""} background-color: ${b[t(h).id]??""};`),Pe(I,"title",`${t(h).id??""} (${E??""} - ${O??""})${t(h).instructor?`, taught by ${t(h).instructor}`:""}`),U(Z,`${H??""} - ${P??""}`),U(G,t(h).id)},[()=>N(t(h)),()=>n(t(h).start),()=>n(t(h).end),()=>n(t(h).start),()=>n(t(h).end)]),S(T,I)}),u(p),u(c),S(e,c)}),u(f),u($),u(x),S(v,x),ye()}function he(v,a){Ae(`/courses?catalog=${encodeURIComponent(t(a))}`)}var Ke=(v,a,i)=>a(t(i).length),Ze=k('<button class="btn svelte-fu93ie">← Previous</button>'),Xe=(v,a,i)=>a(t(i).length),ze=k('<button class="btn svelte-fu93ie">Next →</button>'),Qe=k('<div class="schedule-controls svelte-fu93ie"><!> <div class="schedule-info svelte-fu93ie"><span class="schedule-counter svelte-fu93ie"> </span></div> <!></div> <div class="schedule-wrapper svelte-fu93ie"><!></div>',1),et=k(`<div class="page-card svelte-fu93ie"><div class="no-schedules svelte-fu93ie"><h3 class="svelte-fu93ie">No Valid Schedules Found</h3> <p class="svelte-fu93ie">Unfortunately, there are no valid schedules possible with your selected courses due to
							time conflicts.</p> <p class="svelte-fu93ie">Try removing some courses or selecting different sections.</p></div></div>`),tt=k('<div class="page-card svelte-fu93ie"><div class="loading svelte-fu93ie"><div class="loading-spinner svelte-fu93ie"></div> <p class="svelte-fu93ie">Generating your schedules...</p></div></div>'),at=k('<div class="schedule-page svelte-fu93ie"><div class="schedule-header svelte-fu93ie"><h1 class="page-title svelte-fu93ie">Your Schedule Options</h1> <p class="subtitle svelte-fu93ie">Here are all possible schedules for your selected courses.</p></div> <!> <div class="navigation svelte-fu93ie"><button class="btn svelte-fu93ie">← Back to Courses</button> <div class="step-indicator svelte-fu93ie"><span class="svelte-fu93ie">Step 3 of 3</span></div> <div class="svelte-fu93ie"></div></div></div>'),st=k('<div class="page-card svelte-fu93ie"><div class="no-courses svelte-fu93ie"><h3 class="svelte-fu93ie">No Courses Selected</h3> <p class="svelte-fu93ie">Please go back and select some courses to generate schedules.</p> <button class="btn btn-primary svelte-fu93ie">Select Courses</button></div></div>');function ut(v,a){xe(a,!0);let i=ee(""),d=ee(Ee([])),s=ee(0);Se(()=>{let n=new URLSearchParams(window.location.search);V(i,n.get("catalog")??"Fall 2025",!0),V(d,JSON.parse(n.get("courses")??"[]"),!0)});const r=async n=>{let x=a.data.catalogData[t(i)];return new Promise((y,w)=>{y(Re(n,x))})};function l(n){V(s,(t(s)+1)%n)}function g(n){V(s,(t(s)-1+n)%n)}var b=ie(),M=te(b);{var F=n=>{var x=at(),y=C(m(x),2);De(y,()=>r(t(d)),_=>{var f=tt();S(_,f)},(_,f)=>{var e=ie(),o=te(e);{var c=T=>{var h=Qe(),I=te(h),D=m(I);{var Z=H=>{var P=Ze();P.__click=[Ke,g,f],S(H,P)};q(D,H=>{t(f).length>1&&H(Z)})}var A=C(D,2),G=m(A),X=m(G);u(G),u(A);var z=C(A,2);{var B=H=>{var P=ze();P.__click=[Xe,l,f],S(H,P)};q(z,H=>{t(f).length>1&&H(B)})}u(I);var E=C(I,2),O=m(E);Ue(O,()=>t(s),H=>{Je(H,{get schedule(){return t(f)[t(s)]}})}),u(E),R(()=>U(X,`Schedule ${t(s)+1} of ${t(f).length??""}`)),S(T,h)},p=T=>{var h=et();S(T,h)};q(o,T=>{t(f).length>0?T(c):T(p,!1)})}S(_,e)});var w=C(y,2),$=m(w);$.__click=[he,i],Ne(4),u(w),u(x),S(n,x)},N=n=>{var x=st(),y=m(x),w=C(m(y),4);w.__click=[he,i],u(y),u(x),S(n,x)};q(M,n=>{t(d).length>0?n(F):n(N,!1)})}S(v,b),ye()}$e(["click"]);export{ut as component};
